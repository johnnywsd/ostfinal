{% load url from future %}
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap-theme.min.css">

  <style type="text/css">
    .post-content{
      margin-top: 10px;
    }
    .continue-link{
      margin-left:10px;
    }
    .post-title{
      margin-right:10px
    }
    .edit-link{
      font-size:16px
    }
  </style>

  {%block script%}

  {%endblock%}

  </head> 
<body>

  {% block info %}

  {% endblock %}

  {%for post in posts%}
  {%url 'post_detail_embedded_view' post.id as post_detail_url%}
  <div style="padding:0px 20px">
    <h2>
      <a class="post-title" href="{{post_detail_url}}">{{post.title}}</a>
      {%if is_editable%}
      <small><a class="edit-link" href="{%url 'post_edit_embedded_view' post_id=post.id%}">( Edit ) </a></small>
      <!--<small><a class="edit-link" href="{%url 'post_delete_interact' post_id=post.id%}">( Delete ) </a></small>-->
      <small><a class="edit-link" 
          data-post-id="{{post.id}}" 
          data-post-title="{{post.title}}" 
          onclick="showModal(event)" 
          href="javascript:void(0)"> ( Delete ) </a></small>
      {%endif%}
    </h2>
    <small>post on {{post.create_date}}, by {{post.author_name}}</small>
    <!--<br>-->
    <p class="post-content">{{post.content}}<span class="continue-link"><a href="{{post_detail_url}}">Continue Reading ...</a></span></p>
    <p><small>Post in 
      {%for tag in post.tags%}
        {%if forloop.last%}
          <a href="#">{{tag.name}}.</a>
        {%else%}
          <a href="#">{{tag.name}}, </a>
        {%endif%}
      {%endfor%}
    </small></p>
    <hr style="width:100%"/>
  </div>
  {%endfor%}

  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>

<!--<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">-->
  <!--Launch demo modal-->
<!--</button>-->
<script type="text/javascript">
  function showModal(e){
    var caller = e.target || e.srcElement;
    var post_id = $(caller).data('post-id');
    var post_title = $(caller).data('post-title');
    console.log(post_id);
    var $deleteModal = window.parent.$("#deleteModal");
    <!--console.log($deleteModal);-->
    $deleteModal.find("#post_title").text(post_title);
    $deleteModal.find("#deleteBtn").data("post-id",post_id);
    $deleteModal.modal()
    <!--console.log(window.parent.$("#deleteModal").html())-->
    <!--window.parent.$("#deleteModal").modal()-->
  }
</script>
<!-- Modal -->

</body>

</html>
